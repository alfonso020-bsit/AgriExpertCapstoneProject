{% comment %} {% load static %}
<!DOCTYPE html>
<html lang="tl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mag-signup</title>
    <script>
        function toggleFields() {
            var role = document.getElementById("role").value;
            var farmerFields = document.getElementById("farmer_fields");
            var expertFields = document.getElementById("expert_fields");

            farmerFields.classList.toggle("hidden", role !== "Magsasaka");
            expertFields.classList.toggle("hidden", role !== "Eksperto");

            document.querySelector("[name='farm_size']").required = (role === "Magsasaka");
            document.querySelector("[name='proof_of_expertise']").required = (role === "Eksperto");
            document.querySelector("[name='license_number']").required = (role === "Eksperto");
        }
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: url("{% static 'css/images/bgto.png' %}") no-repeat center center/cover;
            padding: 20px;
        }
        .container {
            width: 100%;
            max-width: 450px;
            background: rgb(255, 255, 255);
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(4, 63, 18, 0.93);
            padding: 20px;
            text-align: center;
            backdrop-filter: blur(5px); /* Adds a slight blur effect for better readability */
        }
        .logo {
            width: 120px;
            height: auto;
            margin-bottom: 10px;
        }
        h2 {
            margin-bottom: 15px;
            color: #333;
            font-size: 22px;
        }
        .form-label {
            font-weight: bold;
            margin-top: 10px;
            display: block;
            text-align: left;
            color: #555;
        }
        .form-control {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(3, 92, 15, 0.1);
        }
        .btn-custom {
            width: 100%;
            padding: 10px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
            margin-top: 15px;
            cursor: pointer;
            font-size: 16px;
        }
        .btn-custom:hover {
            background-color: #218838;
        }
        .hidden {
            display: none;
        }
        .error-message {
            color: red;
            font-size: 14px;
        }
        p {
            text-align: center;
            margin-top: 10px;
        }
        p a {
            color: rgb(3, 112, 3);
            text-decoration: none;
        }
        p a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>

    <div class="container">
        <img src="{% static 'css/images/LOGO.jpg' %}" alt="Logo" class="logo">
        <h2>Mag-signup</h2>
        <form method="POST" action="{% url 'signup' %}" enctype="multipart/form-data">
            {% csrf_token %}

            {% for field in form %}
                {% if field.errors %}
                    <div class="error-message">{{ field.errors|striptags }}</div>
                {% endif %}
            {% endfor %}

            <label class="form-label">Username</label>
            <input type="text" name="username" class="form-control" required>

            <label class="form-label">Email</label>
            <input type="email" name="email" class="form-control" required>

            <label class="form-label">Password</label>
            <input type="password" name="password" class="form-control" required>

            <label class="form-label">Unang Pangalan</label>
            <input type="text" name="first_name" class="form-control" required>

            <label class="form-label">Gitnang Pangalan</label>
            <input type="text" name="middle_name" class="form-control">

            <label class="form-label">Apelyido</label>
            <input type="text" name="last_name" class="form-control" required>

            <label class="form-label">Barangay</label>
            <input type="text" name="barangay" class="form-control" required>

            <label class="form-label">Phone Number</label>
            <input type="text" name="phone_number" class="form-control" required>

            <label class="form-label">Profile Picture</label>
            <input type="file" name="profile_picture" class="form-control" required>

            <label class="form-label">Gampanin (Role)</label>
            <select id="role" name="role" class="form-control" onchange="toggleFields()" required>
                <option value="" disabled selected>Pumili ng Gampanin</option>
                <option value="Magsasaka">Magsasaka</option>
                <option value="Eksperto">Eksperto</option>
            </select>

            <!-- Fields for Farmers -->
            <div id="farmer_fields" class="hidden">
                <label class="form-label">Lawak ng Sakahan (Hectares)</label>
                <input type="number" step="0.01" name="farm_size" class="form-control">
            </div>

            <!-- Fields for Experts -->
            <div id="expert_fields" class="hidden">
                <label class="form-label">Proof of Expertise</label>
                <input type="file" name="proof_of_expertise" class="form-control">
                <label class="form-label">License Number</label>
                <input type="text" name="license_number" class="form-control">
            </div>

            <button type="submit" class="btn-custom">Signup</button>
            <p>May account na? <a href="{% url 'login' %}">Mag-login dito</a></p>
        </form>
    </div>

</body>
</html> {% endcomment %}
{% load static %}
<!DOCTYPE html>
<html lang="tl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mag-signup</title>
    <script>
        function toggleFields() {
            var role = document.getElementById("role").value;
            var farmerFields = document.getElementById("farmer_fields");
            var expertFields = document.getElementById("expert_fields");

            farmerFields.classList.toggle("hidden", role !== "Magsasaka");
            expertFields.classList.toggle("hidden", role !== "Eksperto");

            document.querySelector("[name='farm_size']").required = (role === "Magsasaka");
            document.querySelector("[name='proof_of_expertise']").required = (role === "Eksperto");
            document.querySelector("[name='license_number']").required = (role === "Eksperto");
        }
    </script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; }
        body {
            display: flex; justify-content: center; align-items: center;
            min-height: 100vh; background: url("{% static 'css/images/bgto.png' %}") no-repeat center center/cover;
            padding: 20px;
        }
        .container {
            width: 100%; max-width: 450px; background: white; border-radius: 10px;
            box-shadow: 0 4px 8px rgba(4, 63, 18, 0.93); padding: 20px; text-align: center;
            backdrop-filter: blur(5px);
        }
        .logo { width: 120px; height: auto; margin-bottom: 10px; }
        h2 { margin-bottom: 15px; color: #333; font-size: 22px; }
        .form-label { font-weight: bold; margin-top: 10px; display: block; text-align: left; color: #555; }
        .form-control {
            width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ccc;
            border-radius: 5px; box-shadow: 0 2px 4px rgba(3, 92, 15, 0.1);
        }
        .btn-custom {
            width: 100%; padding: 10px; background-color: #28a745; color: white;
            border: none; border-radius: 5px; margin-top: 15px; cursor: pointer; font-size: 16px;
        }
        .btn-custom:hover { background-color: #218838; }
        .hidden { display: none; }
        .error-message { color: red; font-size: 14px; text-align: left; margin-top: 5px; }
        p { text-align: center; margin-top: 10px; }
        p a { color: rgb(3, 112, 3); text-decoration: none; }
        p a:hover { text-decoration: underline; }
    </style>
</head>
<body>

    <div class="container">
        <img src="{% static 'css/images/LOGO.jpg' %}" alt="Logo" class="logo">
        <h2>Mag-signup</h2>
        <form method="POST" action="{% url 'signup' %}" enctype="multipart/form-data">
            {% csrf_token %}

            <!-- Username -->
            <label class="form-label">Username</label>
            <input type="text" name="username" class="form-control" required>
            {% if form.username.errors %}
                <div class="error-message">{{ form.username.errors.0 }}</div>
            {% endif %}

            <!-- Email -->
            <label class="form-label">Email</label>
            <input type="email" name="email" class="form-control" required>
            {% if form.email.errors %}
                <div class="error-message">{{ form.email.errors.0 }}</div>
            {% endif %}

            <!-- Password -->
            <label class="form-label">Password</label>
            <input type="password" name="password" class="form-control" required>
            {% if form.password.errors %}
                <div class="error-message">{{ form.password.errors.0 }}</div>
            {% endif %}

            <!-- First Name -->
            <label class="form-label">Unang Pangalan</label>
            <input type="text" name="first_name" class="form-control" required>
            {% if form.first_name.errors %}
                <div class="error-message">{{ form.first_name.errors.0 }}</div>
            {% endif %}

            <!-- Middle Name -->
            <label class="form-label">Gitnang Pangalan</label>
            <input type="text" name="middle_name" class="form-control">
            {% if form.middle_name.errors %}
                <div class="error-message">{{ form.middle_name.errors.0 }}</div>
            {% endif %}

            <!-- Last Name -->
            <label class="form-label">Apelyido</label>
            <input type="text" name="last_name" class="form-control" required>
            {% if form.last_name.errors %}
                <div class="error-message">{{ form.last_name.errors.0 }}</div>
            {% endif %}

            <!-- Barangay -->
            <label class="form-label">Barangay</label>
            <input type="text" name="barangay" class="form-control" required>
            {% if form.barangay.errors %}
                <div class="error-message">{{ form.barangay.errors.0 }}</div>
            {% endif %}

            <!-- Phone Number -->
            <label class="form-label">Phone Number</label>
            <input type="text" name="phone_number" class="form-control" required>
            {% if form.phone_number.errors %}
                <div class="error-message">{{ form.phone_number.errors.0 }}</div>
            {% endif %}

            <!-- Profile Picture -->
            <label class="form-label">Profile Picture</label>
            <input type="file" name="profile_picture" class="form-control" required>
            {% if form.profile_picture.errors %}
                <div class="error-message">{{ form.profile_picture.errors.0 }}</div>
            {% endif %}

            <!-- Role Selection -->
            <label class="form-label">Gampanin (Role)</label>
            <select id="role" name="role" class="form-control" onchange="toggleFields()" required>
                <option value="" disabled selected>Pumili ng Gampanin</option>
                <option value="Magsasaka">Magsasaka</option>
                <option value="Eksperto">Eksperto</option>
            </select>
            {% if form.role.errors %}
                <div class="error-message">{{ form.role.errors.0 }}</div>
            {% endif %}

            <!-- Fields for Farmers -->
            <div id="farmer_fields" class="hidden">
                <label class="form-label">Lawak ng Sakahan (Hectares)</label>
                <input type="number" step="0.01" name="farm_size" class="form-control">
                {% if form.farm_size.errors %}
                    <div class="error-message">{{ form.farm_size.errors.0 }}</div>
                {% endif %}
            </div>

            <!-- Fields for Experts -->
            <div id="expert_fields" class="hidden">
                <label class="form-label">Proof of Expertise</label>
                <input type="file" name="proof_of_expertise" class="form-control">
                {% if form.proof_of_expertise.errors %}
                    <div class="error-message">{{ form.proof_of_expertise.errors.0 }}</div>
                {% endif %}
                
                <label class="form-label">License Number</label>
                <input type="text" name="license_number" class="form-control">
                {% if form.license_number.errors %}
                    <div class="error-message">{{ form.license_number.errors.0 }}</div>
                {% endif %}

                <!-- ✅ New Position Field -->
                <label class="form-label">Posisyon</label>
                <input type="text" name="position" class="form-control">
                {% if form.position.errors %}
                    <div class="error-message">{{ form.position.errors.0 }}</div>
                {% endif %}
            </div>

            <button type="submit" class="btn-custom">Signup</button>
            <p>May account na? <a href="{% url 'login' %}">Mag-login dito</a></p>
        </form>
    </div>

</body>
</html>
